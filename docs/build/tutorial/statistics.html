<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Statistical Metrics · TSML Documentation</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>TSML Documentation</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../index.html">HOME</a></li><li><span class="toctext">Tutorial</span><ul><li><a class="toctext" href="aggregators.html">Aggregators and Imputers</a></li><li><a class="toctext" href="pipeline.html">Pipeline</a></li><li class="current"><a class="toctext" href="statistics.html">Statistical Metrics</a><ul class="internal"><li><a class="toctext" href="#Statifier-for-Both-Non-Missing-and-Missing-Values-1">Statifier for Both Non-Missing and Missing Values</a></li><li><a class="toctext" href="#Statifier-for-Non-Missing-Values-only-1">Statifier for Non-Missing Values only</a></li><li><a class="toctext" href="#Statifier-After-Imputation-1">Statifier After Imputation</a></li></ul></li><li><a class="toctext" href="monotonic.html">Monotonic Detection</a></li><li><a class="toctext" href="tsclassifier.html">TS Data Discovery</a></li></ul></li><li><span class="toctext">Manual</span><ul><li><a class="toctext" href="../man/dateproc.html">Date Processing</a></li><li><a class="toctext" href="../man/valueproc.html">Value Processing</a></li><li><a class="toctext" href="../man/aggregation.html">Aggregation</a></li><li><a class="toctext" href="../man/imputation.html">Imputation</a></li><li><a class="toctext" href="../man/monotonic.html">Monotonic Detection</a></li><li><a class="toctext" href="../man/tsclassification.html">TS Classification</a></li><li><a class="toctext" href="../man/cli.html">CLI Wrappers</a></li></ul></li><li><span class="toctext">Library</span><ul><li><a class="toctext" href="../lib/decisiontree.html">Decision Tree</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>Tutorial</li><li><a href="statistics.html">Statistical Metrics</a></li></ul><a class="edit-page" href="https://github.com/IBM/TSML.jl/blob/master/docs/src/tutorial/statistics.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Statistical Metrics</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Statistical-Metrics-1" href="#Statistical-Metrics-1">Statistical Metrics</a></h1><p>Let us again start generating an artificial data with missing values which we  will use in our tutorial below.</p><pre><code class="language-julia">using Random, Dates, DataFrames
function generateDataWithMissing()
   Random.seed!(123)
   gdate = DateTime(2014,1,1):Dates.Minute(15):DateTime(2016,1,1)
   gval = Array{Union{Missing,Float64}}(rand(length(gdate)))
   gmissing = 50000
   gndxmissing = Random.shuffle(1:length(gdate))[1:gmissing]
   df = DataFrame(Date=gdate,Value=gval)
   df[:Value][gndxmissing] .= missing
   return df
end

X = generateDataWithMissing()
first(X,15)</code></pre><table class="data-frame"><thead><tr><th></th><th>Date</th><th>Value</th></tr><tr><th></th><th>Dates…</th><th>Float64⍰</th></tr></thead><tbody><p>15 rows × 2 columns</p><tr><th>1</th><td>2014-01-01T00:00:00</td><td>missing</td></tr><tr><th>2</th><td>2014-01-01T00:15:00</td><td>missing</td></tr><tr><th>3</th><td>2014-01-01T00:30:00</td><td>missing</td></tr><tr><th>4</th><td>2014-01-01T00:45:00</td><td>missing</td></tr><tr><th>5</th><td>2014-01-01T01:00:00</td><td>missing</td></tr><tr><th>6</th><td>2014-01-01T01:15:00</td><td>missing</td></tr><tr><th>7</th><td>2014-01-01T01:30:00</td><td>missing</td></tr><tr><th>8</th><td>2014-01-01T01:45:00</td><td>0.0521332</td></tr><tr><th>9</th><td>2014-01-01T02:00:00</td><td>0.26864</td></tr><tr><th>10</th><td>2014-01-01T02:15:00</td><td>0.108871</td></tr><tr><th>11</th><td>2014-01-01T02:30:00</td><td>0.163666</td></tr><tr><th>12</th><td>2014-01-01T02:45:00</td><td>0.473017</td></tr><tr><th>13</th><td>2014-01-01T03:00:00</td><td>0.865412</td></tr><tr><th>14</th><td>2014-01-01T03:15:00</td><td>missing</td></tr><tr><th>15</th><td>2014-01-01T03:30:00</td><td>missing</td></tr></tbody></table><h2><a class="nav-anchor" id="Statifier-for-Both-Non-Missing-and-Missing-Values-1" href="#Statifier-for-Both-Non-Missing-and-Missing-Values-1">Statifier for Both Non-Missing and Missing Values</a></h2><p>TSML includes <code>Statifier</code> transformer that computes scalar statistics to characterize the time series data. By default, it also computes statistics of  missing blocks of data. To disable this feature, one can pass  <code>:processmissing =&gt; false</code> to the argument during its instance creation. Below illustrates this workflow.</p><pre><code class="language-julia">using Dates
using TSML
using TSML.TSMLTypes
using TSML.TSMLTransformers
using TSML: Pipeline
using TSML: DateValgator
using TSML: DateValNNer
using TSML: Statifier

dtvalgator = DateValgator(Dict(:dateinterval =&gt; Dates.Hour(1)))
dtvalnner = DateValNNer(Dict(:dateinterval =&gt; Dates.Hour(1)))
dtvalizer = DateValizer(Dict(:dateinterval =&gt; Dates.Hour(1)))
stfier = Statifier(Dict(:processmissing =&gt; true))

mypipeline = Pipeline(
  Dict( :transformers =&gt; [
            dtvalgator,
            stfier
         ]
  )
)

fit!(mypipeline,X)
results = transform!(mypipeline,X)</code></pre><table class="data-frame"><thead><tr><th></th><th>TStart</th><th>TEnd</th><th>SFreq</th><th>count</th><th>max</th><th>min</th><th>median</th><th>mean</th><th>q1</th><th>q2</th><th>q25</th><th>q75</th><th>q8</th><th>q9</th><th>kurtosis</th><th>skewness</th><th>variation</th><th>entropy</th><th>autocor</th><th>pacf</th><th>bmedian</th><th>bmean</th><th>bq25</th><th>bq75</th><th>bmin</th><th>bmax</th></tr><tr><th></th><th>Dates…</th><th>Dates…</th><th>Float64</th><th>Int64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th></tr></thead><tbody><p>1 rows × 26 columns</p><tr><th>1</th><td>2014-01-01T00:00:00</td><td>2016-01-01T00:00:00</td><td>0.999943</td><td>13055</td><td>0.999751</td><td>0.000456433</td><td>0.500944</td><td>0.502196</td><td>0.146624</td><td>0.251897</td><td>0.304154</td><td>0.701455</td><td>0.750592</td><td>0.860293</td><td>-0.928492</td><td>0.00290679</td><td>0.510627</td><td>3544.12</td><td>0.0475025</td><td>0.0477302</td><td>1.0</td><td>1.3268</td><td>1.0</td><td>1.0</td><td>1.0</td><td>6.0</td></tr></tbody></table><h2><a class="nav-anchor" id="Statifier-for-Non-Missing-Values-only-1" href="#Statifier-for-Non-Missing-Values-only-1">Statifier for Non-Missing Values only</a></h2><p>If you are not intested with the statistics of the missing blocks, you can disable missing blocks stat summary by indicating <code>:processmissing =&gt; false</code> in the instance argument:</p><pre><code class="language-julia">stfier = Statifier(Dict(:processmissing=&gt;false))
mypipeline = Pipeline(
  Dict( :transformers =&gt; [
            dtvalgator,
            stfier
         ]
  )
)
fit!(mypipeline,X)
results = transform!(mypipeline,X)</code></pre><table class="data-frame"><thead><tr><th></th><th>TStart</th><th>TEnd</th><th>SFreq</th><th>count</th><th>max</th><th>min</th><th>median</th><th>mean</th><th>q1</th><th>q2</th><th>q25</th><th>q75</th><th>q8</th><th>q9</th><th>kurtosis</th><th>skewness</th><th>variation</th><th>entropy</th><th>autocor</th><th>pacf</th></tr><tr><th></th><th>Dates…</th><th>Dates…</th><th>Float64</th><th>Int64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th></tr></thead><tbody><p>1 rows × 20 columns</p><tr><th>1</th><td>2014-01-01T00:00:00</td><td>2016-01-01T00:00:00</td><td>0.999943</td><td>13055</td><td>0.999751</td><td>0.000456433</td><td>0.500944</td><td>0.502196</td><td>0.146624</td><td>0.251897</td><td>0.304154</td><td>0.701455</td><td>0.750592</td><td>0.860293</td><td>-0.928492</td><td>0.00290679</td><td>0.510627</td><td>3544.12</td><td>0.0475025</td><td>0.0477302</td></tr></tbody></table><h2><a class="nav-anchor" id="Statifier-After-Imputation-1" href="#Statifier-After-Imputation-1">Statifier After Imputation</a></h2><p>Let us check the statistics after the imputation by adding <code>DateValNNer</code> instance in the pipeline. We expect that if the imputation is successful, the stats for missing blocks will all be NaN because stats of empty set is an NaN.</p><pre><code class="language-julia">stfier = Statifier(Dict(:processmissing=&gt;true))
mypipeline = Pipeline(
  Dict( :transformers =&gt; [
            dtvalgator,
            dtvalnner,
            stfier
         ]
  )
)
fit!(mypipeline,X)
results = transform!(mypipeline,X)</code></pre><table class="data-frame"><thead><tr><th></th><th>TStart</th><th>TEnd</th><th>SFreq</th><th>count</th><th>max</th><th>min</th><th>median</th><th>mean</th><th>q1</th><th>q2</th><th>q25</th><th>q75</th><th>q8</th><th>q9</th><th>kurtosis</th><th>skewness</th><th>variation</th><th>entropy</th><th>autocor</th><th>pacf</th><th>bmedian</th><th>bmean</th><th>bq25</th><th>bq75</th><th>bmin</th><th>bmax</th></tr><tr><th></th><th>Dates…</th><th>Dates…</th><th>Float64</th><th>Int64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th></tr></thead><tbody><p>1 rows × 26 columns</p><tr><th>1</th><td>2014-01-01T00:00:00</td><td>2016-01-01T00:00:00</td><td>0.999943</td><td>17521</td><td>0.999751</td><td>0.000456433</td><td>0.50022</td><td>0.501232</td><td>0.167654</td><td>0.274743</td><td>0.320764</td><td>0.680764</td><td>0.7263</td><td>0.838924</td><td>-0.789838</td><td>0.00479609</td><td>0.485412</td><td>4896.49</td><td>0.279811</td><td>0.273143</td><td>NaN</td><td>NaN</td><td>NaN</td><td>NaN</td><td>NaN</td><td>NaN</td></tr></tbody></table><p>As we expected, the imputation is successful and there are no more missing values in the processed time series dataset.</p><p>Let&#39;s try with the other imputation using <code>DateValizer</code> and validate that there are no more missing values based on the stats.</p><pre><code class="language-julia">stfier = Statifier(Dict(:processmissing=&gt;true))
mypipeline = Pipeline(
  Dict( :transformers =&gt; [
            dtvalgator,
            dtvalizer,
            stfier
         ]
  )
)
fit!(mypipeline,X)
results = transform!(mypipeline,X)</code></pre><table class="data-frame"><thead><tr><th></th><th>TStart</th><th>TEnd</th><th>SFreq</th><th>count</th><th>max</th><th>min</th><th>median</th><th>mean</th><th>q1</th><th>q2</th><th>q25</th><th>q75</th><th>q8</th><th>q9</th><th>kurtosis</th><th>skewness</th><th>variation</th><th>entropy</th><th>autocor</th><th>pacf</th><th>bmedian</th><th>bmean</th><th>bq25</th><th>bq75</th><th>bmin</th><th>bmax</th></tr><tr><th></th><th>Dates…</th><th>Dates…</th><th>Float64</th><th>Int64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th><th>Float64</th></tr></thead><tbody><p>1 rows × 26 columns</p><tr><th>1</th><td>2014-01-01T00:00:00</td><td>2016-01-01T00:00:00</td><td>0.999943</td><td>17521</td><td>0.999751</td><td>0.000456433</td><td>0.500748</td><td>0.502152</td><td>0.185242</td><td>0.319607</td><td>0.377796</td><td>0.625371</td><td>0.685253</td><td>0.820227</td><td>-0.225831</td><td>0.00396169</td><td>0.441044</td><td>5088.2</td><td>0.0284397</td><td>0.0284876</td><td>NaN</td><td>NaN</td><td>NaN</td><td>NaN</td><td>NaN</td><td>NaN</td></tr></tbody></table><p>Indeed, the imputation got rid of the missing values.</p><footer><hr/><a class="previous" href="pipeline.html"><span class="direction">Previous</span><span class="title">Pipeline</span></a><a class="next" href="monotonic.html"><span class="direction">Next</span><span class="title">Monotonic Detection</span></a></footer></article></body></html>
